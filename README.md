<h1 style='align:center; color:teal'>MicrosoftMalwareClassification</h1>
Detect the malware class of the given software files based on the code.


<h2>Data source</h2>

<p>    Microsoft has been very active in building anti-malware products over the years  and it runs itâ€™s anti-malware utilities over <b>150 million computers</b> around the world. This generates tens of millions of daily data points to be analyzed as potential malware. In order to be effective in analyzing and classifying such large amounts of data, we need to be able to group them into groups and identify their respective families. 
<br>
<br>
This dataset provided by Microsoft contains about 9 classes of malware.
,</p>
<p>
 <a href=https://www.kaggle.com/c/malware-classification>Data Source</a>
</p>
<h4> Types of malware classes</h4>
<ol>
<li>Ramnit</li>
<li>Lollipop</li>
<li>Kelihos_ver3</li>
<li>Vundo</li>
<li>Simda</li>
<li>Tracur</li>
<li>Kelihos_ver1</li>
<li>Obfuscator.ACY</li>
<li>Gatak</li>
</ol>

There are 5 files in total, among which 2 are csv and 3 are .7z file. The size of all these sum upto ~38GB.

After extracting these file occupy a size of <b>200+ GB</b>


<h2>Procedure and Results</h2>

> First separated byte and asm files and performed analysis separately.

<h4><b> Byte (unigrams+bigrams) files</b></h4>

> For each file computed both unigrams(256) and bigrams(65536+1) and stored in a csv and sparse matrix format. It resulted in 65793 features.

> Using truncated svd to reduce dimensionality of data, transformed the features into planes where ~94% of variance is preserved using 1500 components.

> Then performed classification using various models which resulted in the least log-loss of 0.870 uing byte features.

<h4><b> ASM(unigrams) files + pixels(ams, byte) files</b></h4>

> Computed unigrams of the top 50 most important words in all files.
 
> Then converted both asm and byte files into pixels and took the first 800 pixels as features.

> Performed classification by combining both unigrams and pixel features and obtained a least log-loss of <b>0.023</b>

<h4><b> ASM+Byte files(unigrams+bigrams+pixel intensities)</b></h4>

> Combined all the features i.e. unigrams, bigrams, pixel intensities.

> Performed classification using
><ol>
<li>Random forest: log-loss:- 0.029</li>
<li>Xgboost : log-loss:- 0.0183</li>
<li>Xgboost with important features from random forest: log-loss:- 0.0176
</ol>

> While performing classification task all the features are normalized where in an otherwise case log-loss found to be grown.

> The asm files unigram features along with pixel intensities found to be useful compared to the unigram and bigram features of bytefiles. 

<h2> References</h2>

- https://towardsdatascience.com/malware-classification-using-machine-learning-7c648fb1da79

- https://www.youtube.com/watch?v=VLQTRlLGz5Y&t=836s

- https://www.youtube.com/watch?v=fKl2JW_qrso
- https://www.youtube.com/watch?v=_1ZwkCY9wxk&t=329s
